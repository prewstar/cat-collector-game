<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2487.5">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="en"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;title&gt;The Cat Collector's Quest&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&amp;display=swap');</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>body {</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-family: 'Inter', sans-serif;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #f3e8ff;</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>flex-direction: column;</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>min-height: 100vh;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-sizing: border-box;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.game-container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 800px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #ffffff;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 2rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 2.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>flex-direction: column;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 2rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.story-text {</p>
<p class="p1"><span class="Apple-converted-space">            </span>line-height: 1.75;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: #4a5568;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.button-container {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: flex;</p>
<p class="p1"><span class="Apple-converted-space">            </span>flex-direction: column;</p>
<p class="p1"><span class="Apple-converted-space">            </span>gap: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #8b5cf6;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.75rem 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transition: transform 0.2s, background-color 0.2s;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: left;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>button:hover {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #7c3aed;</p>
<p class="p1"><span class="Apple-converted-space">            </span>transform: translateY(-2px);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.fade-in {</p>
<p class="p1"><span class="Apple-converted-space">            </span>animation: fadeIn 0.8s ease-in-out;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>@keyframes fadeIn {</p>
<p class="p1"><span class="Apple-converted-space">            </span>from { opacity: 0; transform: translateY(10px); }</p>
<p class="p1"><span class="Apple-converted-space">            </span>to { opacity: 1; transform: translateY(0); }</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>.bad-ending-button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #ef4444;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.success-ending-button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #22c55e;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">        </span>.secret-ending-button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #f59e0b;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>/* Modal for images and hints */</p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal {</p>
<p class="p1"><span class="Apple-converted-space">            </span>display: none;</p>
<p class="p1"><span class="Apple-converted-space">            </span>position: fixed;</p>
<p class="p1"><span class="Apple-converted-space">            </span>z-index: 1;</p>
<p class="p1"><span class="Apple-converted-space">            </span>left: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>top: 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>overflow: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: rgba(0,0,0,0.4);</p>
<p class="p1"><span class="Apple-converted-space">            </span>justify-content: center;</p>
<p class="p1"><span class="Apple-converted-space">            </span>align-items: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal-content {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #fefefe;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 20px;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 90%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>box-shadow: 0 5px 15px rgba(0,0,0,0.3);</p>
<p class="p1"><span class="Apple-converted-space">            </span>text-align: center;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal-content img {</p>
<p class="p1"><span class="Apple-converted-space">            </span>max-width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">            </span>height: auto;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>margin-bottom: 1rem;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>.modal-content .close-button {</p>
<p class="p1"><span class="Apple-converted-space">            </span>background-color: #8b5cf6;</p>
<p class="p1"><span class="Apple-converted-space">            </span>color: white;</p>
<p class="p1"><span class="Apple-converted-space">            </span>padding: 0.5rem 1.5rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>border-radius: 0.75rem;</p>
<p class="p1"><span class="Apple-converted-space">            </span>font-weight: bold;</p>
<p class="p1"><span class="Apple-converted-space">            </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body class="bg-gray-100 flex items-center justify-center min-h-screen"&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="game-container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;h1 class="text-3xl font-bold text-center text-gray-800"&gt;The Cat Collector's Quest&lt;/h1&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="game-info" class="text-center text-sm text-gray-500 flex justify-between px-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span id="cats-collected"&gt;Cats Collected: 0&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;span id="special-cats-collected"&gt;Special Cats: 0&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button id="hint-button" class="bg-gray-400 text-white text-xs px-2 py-1 rounded-full hover:bg-gray-500"&gt;Hint&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="story-text" class="story-text text-lg"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div id="choice-buttons" class="button-container"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;!-- Image/Hint Modal --&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div id="image-modal" class="modal"&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="modal-content"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h2 id="modal-title" class="text-2xl font-bold mb-4"&gt;&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;img id="modal-image" src="" alt=""&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;p id="modal-text" class="mb-4"&gt;&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;button id="modal-continue-button" class="close-button"&gt;Continue&lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">        </span>// Use a self-invoking anonymous function to avoid polluting the global scope</p>
<p class="p1"><span class="Apple-converted-space">        </span>(function() {</p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- Image URLs for special cats ---</p>
<p class="p1"><span class="Apple-converted-space">            </span>const imageUrls = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>aquatic: "uploaded:Gemini_Generated_Image_jvpdlpjvpdlpjvpd.jpg-cde04dd6-8d7c-4e97-9023-5c940f771f9f",</p>
<p class="p1"><span class="Apple-converted-space">                </span>sphinx: "uploaded:Gemini_Generated_Image_w9tv7mw9tv7mw9tv.jpg-079d4db1-8325-4a30-a8f2-f1bb9882d4c9",</p>
<p class="p1"><span class="Apple-converted-space">                </span>tiger: "uploaded:Gemini_Generated_Image_4cxtcu4cxtcu4cxt(2).jpg-9b285201-4435-4d2c-9e10-8aede3f6c98e",</p>
<p class="p1"><span class="Apple-converted-space">                </span>lynx: "uploaded:Gemini_Generated_Image_4cxtcu4cxtcu4cxt(1).jpg-06206a3a-7e79-4c3f-990f-6635f76fda3f",</p>
<p class="p1"><span class="Apple-converted-space">                </span>ethereal: "uploaded:Gemini_Generated_Image_4cxtcu4cxtcu4cxt.jpg-9dc2ef05-0fcc-45c8-ab5d-526f1844908d",</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>const hintData = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>aquatic: "1. The farmer is struggling with mice, help him out and he'll give you a special reward.",</p>
<p class="p1"><span class="Apple-converted-space">                </span>sphinx: "2. Rumours are sometimes true.",</p>
<p class="p1"><span class="Apple-converted-space">                </span>tiger: "3. Did you ever think of entering your own exotic cat in the Pawsh Show?",</p>
<p class="p1"><span class="Apple-converted-space">                </span>lynx: "4. A patient cat awaits in the desert if you have a certain fluffy friend with you.",</p>
<p class="p1"><span class="Apple-converted-space">                </span>ethereal: "5. An ancient cat is hidden in a deep cave, but you need a special crystal to find it."</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- Game State Variables ---</p>
<p class="p1"><span class="Apple-converted-space">            </span>let currentState = 'start';</p>
<p class="p1"><span class="Apple-converted-space">            </span>let previousState = '';</p>
<p class="p1"><span class="Apple-converted-space">            </span>let catsCollected = 0;</p>
<p class="p1"><span class="Apple-converted-space">            </span>const totalCats = 20;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let hasDesertLynx = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let hasExoticCat = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let hasVisitedSeaside = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let hasVisitedForest = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let hasVisitedDesert = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let hasCafeClue = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let hasLuckyRod = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let hasPamperedPersian = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let hasGlowingCrystal = false;</p>
<p class="p1"><span class="Apple-converted-space">            </span>let specialCats = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>aquatic: false,</p>
<p class="p1"><span class="Apple-converted-space">                </span>sphinx: false,</p>
<p class="p1"><span class="Apple-converted-space">                </span>tiger: false,</p>
<p class="p1"><span class="Apple-converted-space">                </span>lynx: false,</p>
<p class="p1"><span class="Apple-converted-space">                </span>ethereal: false,</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p1"><span class="Apple-converted-space">            </span>const totalSpecialCats = 5;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- DOM Elements ---</p>
<p class="p1"><span class="Apple-converted-space">            </span>const storyTextElement = document.getElementById('story-text');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const choiceButtonsElement = document.getElementById('choice-buttons');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const catsCollectedElement = document.getElementById('cats-collected');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const specialCatsCollectedElement = document.getElementById('special-cats-collected');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const modal = document.getElementById('image-modal');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const modalImage = document.getElementById('modal-image');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const modalTitle = document.getElementById('modal-title');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const modalText = document.getElementById('modal-text');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const modalContinueButton = document.getElementById('modal-continue-button');</p>
<p class="p1"><span class="Apple-converted-space">            </span>const hintButton = document.getElementById('hint-button');</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>hintButton.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>let hints = "Special Cats Hints:\n\n";</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!specialCats.aquatic) hints += hintData.aquatic + "\n";</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!specialCats.sphinx) hints += hintData.sphinx + "\n";</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!specialCats.tiger) hints += hintData.tiger + "\n";</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!specialCats.lynx) hints += hintData.lynx + "\n";</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (!specialCats.ethereal) hints += hintData.ethereal + "\n";</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (Object.values(specialCats).every(c =&gt; c)) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>hints = "You've found all the special cats! Time to go to the convention!";</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>showImageModal('Hints', hints, null);</p>
<p class="p1"><span class="Apple-converted-space">            </span>});</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- Game Data (Scenes) ---</p>
<p class="p1"><span class="Apple-converted-space">            </span>const scenes = {</p>
<p class="p1"><span class="Apple-converted-space">                </span>start: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "Your quest to become the ultimate Cat Collector begins! To find all the cats in the world, you must start somewhere. Do you begin your journey in the bustling city or the tranquil countryside?",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Head to the bustling city.", nextScene: 'city_start' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Go to the tranquil countryside.", nextScene: 'countryside_start' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                         </span>// Reset all state variables at the start of a new game</p>
<p class="p1"><span class="Apple-converted-space">                         </span>catsCollected = 0;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>hasDesertLynx = false;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>hasExoticCat = false;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>hasVisitedSeaside = false;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>hasVisitedForest = false;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>hasVisitedDesert = false;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>hasCafeClue = false;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>hasLuckyRod = false;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>hasPamperedPersian = false;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>hasGlowingCrystal = false;</p>
<p class="p1"><span class="Apple-converted-space">                         </span>specialCats = {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>aquatic: false,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>sphinx: false,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>tiger: false,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>lynx: false,</p>
<p class="p1"><span class="Apple-converted-space">                            </span>ethereal: false,</p>
<p class="p1"><span class="Apple-converted-space">                         </span>};</p>
<p class="p1"><span class="Apple-converted-space">                         </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                         </span>updateSpecialCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>city_start: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You arrive in the city. The noise is overwhelming, but you're on a mission. Do you visit the famous 'Whisker &amp; Brew' Cat Cafe or attend the exclusive 'Pawsh' Cat Show?",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Visit the 'Whisker &amp; Brew' Cat Cafe.", nextScene: 'cat_cafe' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Attend the 'Pawsh' Cat Show.", nextScene: 'cat_show' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Head out of town.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>countryside_start: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You find yourself in the serene countryside. Rolling hills and fresh air greet you. Do you explore the mysterious old barn or a friendly, bustling farm?",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Explore the mysterious old barn.", nextScene: 'mysterious_barn' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Visit the friendly, bustling farm.", nextScene: 'friendly_farm' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Seek higher ground.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>// --- Bad Ending 1: Death ---</p>
<p class="p1"><span class="Apple-converted-space">                </span>mysterious_barn: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You enter the barn, and the air grows cold. You see a pair of glowing eyes in the darkness. It's a massive, wild bobcat, startled and cornered! Do you try to calm it down or quickly run away?",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Try to calm it with a soothing voice.", nextScene: 'death_ending' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Try to tame the bobcat by making yourself big.", nextScene: 'death_ending' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Back away slowly and carefully.", nextScene: 'countryside_start' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>scenes.mysterious_barn.choices = [</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Try to calm it with a soothing voice.", nextScene: 'death_ending' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Try to tame the bobcat by making yourself big.", nextScene: 'death_ending' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Back away slowly and carefully.", nextScene: 'countryside_start' }</p>
<p class="p1"><span class="Apple-converted-space">                        </span>];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (hasDesertLynx) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>scenes.mysterious_barn.choices.push({ text: "Use your desert lynx to help you tame the bobcat.", nextScene: 'barn_secret' });</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>death_ending: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "The bobcat doesn't appreciate your soothing voice. It lets out a hiss and lunges, and the quest for cats is over. Forever.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Restart", nextScene: 'start' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Undo", nextScene: 'previous' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>isEnding: true,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>endingType: 'bad'</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>// --- Bad Ending 2: Incarceration ---</p>
<p class="p1"><span class="Apple-converted-space">                </span>cat_cafe: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "At the cat cafe, a strange person in a trench coat whispers a proposal: 'I know where the legendary Shadow Cat of the West is. It's at a private sanctuary, heavily guarded. Meet me here at midnight, and we'll get it.'",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Agree to the midnight rendezvous.", nextScene: 'sanctuary_heist' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Politely decline and stay on the ethical path.", nextScene: 'city_start' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Talk to other patrons.", nextScene: 'cafe_clue_bonus' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>sanctuary_heist: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You meet the mysterious person and break into the sanctuary. Alarms blare! The person vanishes, and you're caught by the authorities. The judge sentences you to 20 years for attempted cat-napping. No cats for you.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Restart", nextScene: 'start' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Undo", nextScene: 'previous' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>isEnding: true,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>endingType: 'bad'</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>// --- Paths to collect cats ---</p>
<p class="p1"><span class="Apple-converted-space">                </span>cat_show: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You are at the 'Pawsh' Cat Show. What do you want to do?",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>// Dynamic choices based on progress</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>scenes.cat_show.choices = [</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Buy a cat.", nextScene: 'cat_show_buy' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Listen to gossip.", nextScene: 'cat_show_gossip' }</p>
<p class="p1"><span class="Apple-converted-space">                        </span>];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (hasExoticCat) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>scenes.cat_show.choices.push({ text: "Enter your exotic cat in a competition.", nextScene: 'tiger_ending' });</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>cat_show_buy: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You collect your first cat, a pampered Persian, and get a clue that more rare cats are in a coastal town. You now have a cat!",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Continue the quest.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>catsCollected++;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>hasPamperedPersian = true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>cat_show_gossip: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You overhear a group of judges talking about the grand Cat Convention, and how all the best collectors are coming with cats from a bustling seaside village.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                         </span>{ text: "Continue the quest.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>catsCollected++;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>tiger_ending: {</p>
<p class="p1"><span class="Apple-converted-space">                     </span>text: "Wow! The judges at the Pawsh show are so impressed with your exotic cat, they give you a pet tiger (which counts as a cat) and a reward of $1000!",</p>
<p class="p1"><span class="Apple-converted-space">                     </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Continue the quest.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>catsCollected++;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>specialCats.tiger = true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateSpecialCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>showImageModal('Tiger', 'The judges give you a tiger for winning the comp.', imageUrls.tiger);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>cafe_clue_bonus: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You overhear some patrons talking about a magical cat that lives deep within a mystical forest. This could be a good lead!",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Return to the city and continue your quest.", nextScene: 'city_start' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>hasCafeClue = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>friendly_farm: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You find yourself at a friendly, bustling farm. The farmer waves at you from his porch. What do you do?",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>let choices = [</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Ask him about his cousin.", nextScene: 'farm_bad_ending' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Offer to stack wood.", nextScene: 'farm_good_ending' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (catsCollected &gt;= 5) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>choices.push({ text: "Offer your cats to catch the mice on his farm.", nextScene: 'farm_rod_ending' });</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>scenes.friendly_farm.choices = choices;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>farm_bad_ending: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "The farmer gets a scowl on his face. 'I don't know my cousin! Don't be spreading rumors!' he shouts angrily and chases you off his farm.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Return to the countryside.", nextScene: 'countryside_start' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>isEnding: false</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>farm_good_ending: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You offer to stack some wood, and the farmer thanks you. He says he's getting too old to care for his cat and gives you the beautiful ginger tabby to look after. You now have a cat!",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Continue the quest.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>catsCollected++;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>farm_rod_ending: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "Your cats clear the farm of mice in no time! The farmer is so impressed, he gives you his Lucky Fishing Rod as a thank you.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Continue the quest.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>hasLuckyRod = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>crossroads: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: ``, // The text will be set dynamically in the action function</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>// Dynamic choices based on progress</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>scenes.crossroads.text = `You have successfully collected ${catsCollected} cat(s)! You must collect ${totalCats} cats to win. Where do you go next to continue your quest?`;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>const baseChoices = [</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Explore a bustling seaside village.", nextScene: 'seaside_village' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Venture into a mystical, enchanted forest.", nextScene: 'mystical_forest' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Travel to a remote desert oasis.", nextScene: 'desert_oasis' }</p>
<p class="p1"><span class="Apple-converted-space">                        </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>const newChoices = [];</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (hasVisitedSeaside || hasVisitedForest || hasVisitedDesert) {</p>
<p class="p1"><span class="Apple-converted-space">                           </span>newChoices.push({ text: "Return to the city.", nextScene: 'city_start'});</p>
<p class="p1"><span class="Apple-converted-space">                           </span>newChoices.push({ text: "Return to the countryside.", nextScene: 'countryside_start'});</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (hasVisitedSeaside &amp;&amp; hasVisitedForest &amp;&amp; hasVisitedDesert) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>newChoices.push({ text: "Head to the Final Cat Collector's Convention to try and win.", nextScene: 'final_convention' });</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                        </span>scenes.crossroads.choices = [...baseChoices, ...newChoices];</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>seaside_village: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You visit a charming seaside village. You can either visit the docks or the local pet store. Which do you choose?",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Visit the docks.", nextScene: 'seaside_docks' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Go to the pet store.", nextScene: 'seaside_pet_store' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>hasVisitedSeaside = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>seaside_docks: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "As you approach the docks, you see a grumpy harbor master guarding a pile of fish. Do you offer to help him with his catch, hoping to earn a cat, or sneak around to find some kittens on the fishing boats?",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Offer to help the harbor master.", nextScene: 'seaside_docks_help' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Try to sneak onto a boat.", nextScene: 'seaside_docks_sneak' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>scenes.seaside_docks.choices = [</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Offer to help the harbor master.", nextScene: 'seaside_docks_help' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Try to sneak onto a boat.", nextScene: 'seaside_docks_sneak' }</p>
<p class="p1"><span class="Apple-converted-space">                        </span>];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (hasLuckyRod &amp;&amp; !specialCats.aquatic) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>scenes.seaside_docks.choices.push({text: "Use the lucky fishing rod to catch something special.", nextScene: 'docks_fishing_bonus'});</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>seaside_docks_help: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "The harbor master is so grateful for your help that he gives you a whole litter of adorable kittens he found on his boat. You gather three of them and add them to your collection!",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Return to the crossroads to plan your next move.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>catsCollected += 3;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>seaside_docks_sneak: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You try to sneak onto a boat, but you trip and fall loudly! The harbor master yells at you, and an officer arrests you for trespassing. This quest is over!",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Restart", nextScene: 'start' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Undo", nextScene: 'previous' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>isEnding: true,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>endingType: 'bad'</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>docks_fishing_bonus: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You cast your lucky fishing rod and pull in not a fish, but a rare, aquatic feline with shimmering scales! It happily joins your collection.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                         </span>{ text: "Return to the crossroads to plan your next move.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>catsCollected += 1;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>specialCats.aquatic = true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateSpecialCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>showImageModal('Aquatic Feline', 'You found a rare mer-cat with shimmering scales!', imageUrls.aquatic);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>seaside_pet_store: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You find a rare, exotic feline at the pet store. With a bit of convincing, you are able to adopt the unique cat.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Return to the crossroads to plan your next move.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>catsCollected += 1;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>hasExoticCat = true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>mystical_forest: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "Deep in the forest, you encounter two paths. One is a sparkling path that leads to a magical grove, and the other is a shadowy trail leading to a mysterious cave. Which path do you choose?",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Take the sparkling path.", nextScene: 'mystical_grove' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Follow the shadowy trail.", nextScene: 'mystical_cave' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>hasVisitedForest = true;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>mystical_grove: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You follow the sparkling path and find yourself in a beautiful, open grove. You can either charm the fairies for cats, or you can find a way to enter a hidden, magical glade.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Try to charm the fairies.", nextScene: 'mystical_grove_fairies' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Find the hidden glade.", nextScene: 'mystical_grove_glade' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>scenes.mystical_grove.choices = [</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Try to charm the fairies.", nextScene: 'mystical_grove_fairies' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Find the hidden glade.", nextScene: 'mystical_grove_glade' }</p>
<p class="p1"><span class="Apple-converted-space">                        </span>];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (hasCafeClue &amp;&amp; !specialCats.sphinx) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>scenes.mystical_grove.choices.push({ text: "Follow the rumor you heard at the cafe.", nextScene: 'forest_clue_bonus' });</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>mystical_grove_fairies: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "In the magical grove, a wise, ancient cat grants you two companions for your quest, after you share some of your snacks with the fairies.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Return to the crossroads to plan your next move.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>catsCollected += 2;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>mystical_grove_glade: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You find a hidden glade, but you are caught by the glade's guardian, a wise old owl. The owl is angry you are trespassing and casts a spell on you, turning you into a mouse. Your quest is over!",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Restart", nextScene: 'start' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Undo", nextScene: 'previous' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>isEnding: true,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>endingType: 'bad'</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>forest_clue_bonus: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You follow the trail from the cafe clue and find a tiny, glowing Sphinx.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                         </span>{ text: "Speak the answer to the riddle.", nextScene: 'sphinx_riddle' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>sphinx_riddle: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "I have cities, but no houses. I have mountains, but no trees. I have water, but no fish. What am I?",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "America.", nextScene: 'teleport_ending' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "A map.", nextScene: 'sphinx_success' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "A book.", nextScene: 'teleport_ending' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "The sky.", nextScene: 'teleport_ending' },</p>
<p class="p1"><span class="Apple-converted-space">                    </span>]</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>sphinx_success: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You answer correctly, and the Sphinx purrs with delight! It happily joins your collection as a reward for your wisdom.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Return to the crossroads to plan your next move.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>catsCollected += 1;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>specialCats.sphinx = true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateSpecialCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>showImageModal('Sphinx', 'You have solved the riddle and gained the wise Sphinx!', imageUrls.sphinx);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>teleport_ending: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "Your answer angers the Sphinx! With a flash of light, it teleports you to a random area of the world. Your quest continues, but you are disoriented.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                         </span>{ text: "Continue the quest.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p2"><span class="Apple-converted-space">                       </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>mystical_cave: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You follow the shadowy trail and find yourself at the entrance of a mysterious cave. What do you do?",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Enter the cave.", nextScene: 'cave_enter' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Climb the rocky slope.", nextScene: 'cave_fall_ending' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Return to crossroads.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>scenes.mystical_cave.choices = [</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Enter the cave.", nextScene: 'cave_enter' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Climb the rocky slope.", nextScene: 'cave_fall_ending' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Return to crossroads.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                        </span>];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (hasGlowingCrystal &amp;&amp; !specialCats.ethereal) {</p>
<p class="p1"><span class="Apple-converted-space">                           </span>scenes.mystical_cave.choices.push({ text: "Use your crystal to find something special.", nextScene: 'mystical_cave_bonus' });</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>cave_enter: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "In the cave, a mischievous fairy leads you to a treasure trove guarded by two fierce-looking cats. You bravely fight them and collect the cats as a reward.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Return to the crossroads to plan your next move.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>catsCollected += 2;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>cave_fall_ending: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You attempt to climb the rocky slope, but your footing gives way. You fall and end up in a coma. Your quest is over.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Restart", nextScene: 'start' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Undo", nextScene: 'previous' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>isEnding: true,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>endingType: 'bad'</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>mystical_cave_bonus: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You use your crystal to open a secret chamber. Inside the walls pulsate with ancient light. A tiny, luminous cat with shimmering wings takes flight from it and joins your collection.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Return to the crossroads to plan your next move.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>catsCollected += 1;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>specialCats.ethereal = true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateSpecialCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>showImageModal('Ethereal Cat', 'You discovered a tiny, luminous cat with shimmering wings!', imageUrls.ethereal);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>desert_oasis: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "In the desert, you discover a hidden oasis. The felines here are elusive. What do you do?",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>hasVisitedDesert = true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const choices = [</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Set a trap.", nextScene: 'oasis_trap' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Explore the ancient ruins.", nextScene: 'ruins_trap' },</p>
<p class="p1"><span class="Apple-converted-space">                            </span>{ text: "Look for water.", nextScene: 'oasis_shrine' }</p>
<p class="p1"><span class="Apple-converted-space">                        </span>];</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (hasPamperedPersian &amp;&amp; !specialCats.lynx) {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>choices.push({ text: "Wait patiently and pamper your persian with pats.", nextScene: 'oasis_patience' });</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>scenes.desert_oasis.choices = choices;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>oasis_shrine: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "While searching for water, you discover a hidden shrine. Inside, a beautiful glowing crystal is revealed. You take the crystal and hope it will aid you on your journey.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Return to the crossroads to plan your next move.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>hasGlowingCrystal = true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>catsCollected += 1;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>showImageModal('Glowing Crystal', 'You found a glowing crystal that might be useful!', imageUrls.glowingCrystal);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>ruins_trap: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You explore the ancient ruins, but you set off a booby trap! A giant boulder rolls down a narrow path and traps you. You are stuck, and your quest is over.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Restart", nextScene: 'start' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Undo", nextScene: 'previous' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>isEnding: true,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>endingType: 'bad'</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>oasis_patience: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You sit patiently, and your pampered persian's purrs echo through the oasis. A beautiful desert lynx approaches, intrigued by the gentle sound. It is impressed by your patience and joins your collection.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Return to the crossroads to plan your next move.", nextScene: 'crossroads' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>catsCollected += 1;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>hasDesertLynx = true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>specialCats.lynx = true;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateSpecialCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                        </span>showImageModal('Desert Lynx', 'The majestic desert lynx has joined your collection!', imageUrls.lynx);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>oasis_trap: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You set a clever trap, but you accidentally trip and get the trap stuck around your ankle. You are now stranded in the desert, unable to continue your quest.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Restart", nextScene: 'start' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Undo", nextScene: 'previous' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>isEnding: true,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>endingType: 'bad'</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>// --- Final challenge scene with win/lose logic ---</p>
<p class="p1"><span class="Apple-converted-space">                </span>final_convention: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "You arrive at the grand convention. The judges stand before you, ready to count your collection.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Present your cats to the judges!" }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const sceneId = catsCollected &gt;= totalCats ? 'success_ending' : 'failure_ending';</p>
<p class="p1"><span class="Apple-converted-space">                        </span>updateScene(sceneId);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>// --- Successful Ending ---</p>
<p class="p1"><span class="Apple-converted-space">                </span>success_ending: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: ``,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Restart", nextScene: 'start' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Undo", nextScene: 'previous' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>isEnding: true,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>endingType: 'success'</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>// --- Bad Ending 3: Failure ---</p>
<p class="p1"><span class="Apple-converted-space">                </span>failure_ending: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: ``,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Restart", nextScene: 'start' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Undo", nextScene: 'previous' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>isEnding: true,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>endingType: 'bad'</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>// --- Secret Ending ---</p>
<p class="p1"><span class="Apple-converted-space">                </span>barn_secret: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "The desert lynx you collected helps you approach the bobcat. The lynx whispers words of encouragement to the bobcat, and it calms down, revealing it is the guardian of a secret feline paradise. The bobcat leads you to a hidden door, and inside, you find a massive, sprawling room filled with 1000 cats. You bring them all to the judges.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Present your 1000 cats!", nextScene: 'secret_ending' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>action: () =&gt; {</p>
<p class="p2"><span class="Apple-converted-space">                        </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                </span>},</p>
<p class="p1"><span class="Apple-converted-space">                </span>secret_ending: {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>text: "Wow, 1000 cats! The judges are astonished. You are the new cat master. The ultimate feline queen.",</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choices: [</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Restart", nextScene: 'start' },</p>
<p class="p1"><span class="Apple-converted-space">                        </span>{ text: "Undo", nextScene: 'previous' }</p>
<p class="p1"><span class="Apple-converted-space">                    </span>],</p>
<p class="p1"><span class="Apple-converted-space">                    </span>isEnding: true,</p>
<p class="p1"><span class="Apple-converted-space">                    </span>endingType: 'secret'</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>// --- Core Game Functions ---</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>function showImageModal(title, text, imageUrl) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>modalTitle.textContent = title;</p>
<p class="p1"><span class="Apple-converted-space">                </span>modalText.textContent = text;</p>
<p class="p1"><span class="Apple-converted-space">                </span>modalImage.src = imageUrl || '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>modal.style.display = 'flex';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>modalContinueButton.onclick = () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>modal.style.display = 'none';</p>
<p class="p1"><span class="Apple-converted-space">                </span>};</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>function updateScene(sceneId) {</p>
<p class="p1"><span class="Apple-converted-space">                </span>previousState = currentState;</p>
<p class="p1"><span class="Apple-converted-space">                </span>currentState = sceneId;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>const scene = scenes[sceneId];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (sceneId === 'success_ending') {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>scene.text = `Congratulations! You have collected ${catsCollected} cats, which is more than the required ${totalCats}. The judges are impressed! You are crowned the ultimate Cat Collector.`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else if (sceneId === 'failure_ending') {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>scene.text = `The judges count your cats... You only have ${catsCollected}. This is not enough! They declare your quest a failure. You return home in shame, but with some new cat friends.`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else if (sceneId === 'crossroads') {</p>
<p class="p1"><span class="Apple-converted-space">                     </span>scene.text = `You have successfully collected ${catsCollected} cat(s)! You must collect ${totalCats} cats to win. Where do you go next to continue your quest?`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>choiceButtonsElement.innerHTML = '';</p>
<p class="p1"><span class="Apple-converted-space">                </span>storyTextElement.classList.add('fade-in');</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>if (scene.action) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>scene.action();</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>setTimeout(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>storyTextElement.innerHTML = scene.text;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>storyTextElement.classList.remove('fade-in');</p>
<p class="p1"><span class="Apple-converted-space">                </span>}, 100);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">                </span>scene.choices.forEach(choice =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const button = document.createElement('button');</p>
<p class="p1"><span class="Apple-converted-space">                    </span>button.textContent = choice.text;</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (choice.nextScene === 'final_convention') {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>button.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>if (catsCollected &gt;= totalCats) {</p>
<p class="p1"><span class="Apple-converted-space">                                </span>updateScene('success_ending');</p>
<p class="p1"><span class="Apple-converted-space">                            </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                                </span>updateScene('failure_ending');</p>
<p class="p1"><span class="Apple-converted-space">                            </span>}</p>
<p class="p1"><span class="Apple-converted-space">                        </span>});</p>
<p class="p1"><span class="Apple-converted-space">                    </span>} else if (choice.nextScene === 'secret_ending') {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>button.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>updateScene('secret_ending');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>});</p>
<p class="p1"><span class="Apple-converted-space">                    </span>} else if (choice.nextScene === 'previous') {</p>
<p class="p1"><span class="Apple-converted-space">                         </span>button.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                             </span>updateScene(previousState);</p>
<p class="p1"><span class="Apple-converted-space">                         </span>});</p>
<p class="p1"><span class="Apple-converted-space">                    </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>button.addEventListener('click', () =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>if (choice.nextScene === 'start') {</p>
<p class="p1"><span class="Apple-converted-space">                                </span>catsCollected = 0;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>hasDesertLynx = false;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>hasExoticCat = false;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>hasVisitedSeaside = false;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>hasVisitedForest = false;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>hasVisitedDesert = false;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>hasCafeClue = false;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>hasLuckyRod = false;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>hasPamperedPersian = false;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>hasGlowingCrystal = false;</p>
<p class="p1"><span class="Apple-converted-space">                                </span>specialCats = {</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>aquatic: false,</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>sphinx: false,</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>tiger: false,</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>lynx: false,</p>
<p class="p1"><span class="Apple-converted-space">                                    </span>ethereal: false,</p>
<p class="p1"><span class="Apple-converted-space">                                </span>};</p>
<p class="p1"><span class="Apple-converted-space">                                </span>updateCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                                </span>updateSpecialCatsDisplay();</p>
<p class="p1"><span class="Apple-converted-space">                            </span>}</p>
<p class="p1"><span class="Apple-converted-space">                            </span>updateScene(choice.nextScene);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>});</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p2"><span class="Apple-converted-space">                    </span></p>
<p class="p1"><span class="Apple-converted-space">                    </span>if (scene.isEnding) {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>if (scene.endingType === 'success') {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>button.classList.add('success-ending-button');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} else if (choice.nextScene === 'previous') {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>// The undo button for endings</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} else if (choice.text === 'Return to the countryside.') {</p>
<p class="p1"><span class="Apple-converted-space">                             </span>// This is not an ending so we don't apply ending button styles</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} else if (choice.text === 'Return to the city.') {</p>
<p class="p1"><span class="Apple-converted-space">                             </span>// This is not an ending so we don't apply ending button styles</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} else if (scene.endingType === 'bad') {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>button.classList.add('bad-ending-button');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>} else if (scene.endingType === 'secret') {</p>
<p class="p1"><span class="Apple-converted-space">                            </span>button.classList.add('secret-ending-button');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>choiceButtonsElement.appendChild(button);</p>
<p class="p1"><span class="Apple-converted-space">                </span>});</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>function updateCatsDisplay() {</p>
<p class="p1"><span class="Apple-converted-space">                </span>catsCollectedElement.textContent = `Cats Collected: ${catsCollected} / ${totalCats}`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (catsCollected &gt;= totalCats) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>catsCollectedElement.style.color = '#22c55e';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>catsCollectedElement.style.fontWeight = 'bold';</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>catsCollectedElement.style.color = '#4a5568';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>catsCollectedElement.style.fontWeight = 'normal';</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>function updateSpecialCatsDisplay() {</p>
<p class="p1"><span class="Apple-converted-space">                </span>const collectedCount = Object.values(specialCats).filter(v =&gt; v).length;</p>
<p class="p1"><span class="Apple-converted-space">                </span>specialCatsCollectedElement.textContent = `Special Cats: ${collectedCount} / ${totalSpecialCats}`;</p>
<p class="p1"><span class="Apple-converted-space">                </span>if (collectedCount === totalSpecialCats) {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>specialCatsCollectedElement.style.color = '#22c55e';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>specialCatsCollectedElement.style.fontWeight = 'bold';</p>
<p class="p1"><span class="Apple-converted-space">                </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>specialCatsCollectedElement.style.color = '#4a5568';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>specialCatsCollectedElement.style.fontWeight = 'normal';</p>
<p class="p1"><span class="Apple-converted-space">                </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">            </span>updateScene('start');</p>
<p class="p1"><span class="Apple-converted-space">        </span>})();</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
